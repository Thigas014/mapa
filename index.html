<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mapa Esperança - PB</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100vh; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Coordenadas de Esperança, PB
    var map = L.map('map').setView([-7.0228, -35.86], 13);

    // Fundo de mapa OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Função para carregar GeoJSON
    function addGeoJSON(url, styleOptions, isMarker, popupProp) {
      fetch(url)
        .then(res => res.json())
        .then(data => {
          L.geoJSON(data, {
            style: styleOptions,
            pointToLayer: isMarker ? (feature, latlng) => {
              return L.circleMarker(latlng, styleOptions);
            } : undefined,
            onEachFeature: (feature, layer) => {
              if (popupProp && feature.properties && feature.properties[popupProp]) {
                layer.bindPopup(feature.properties[popupProp]);
              }
            }
          }).addTo(map);
        });
    }

   

    // 2️⃣ Escola (ponto) - azul
    addGeoJSON('escola.json', { radius: 8, fillColor: 'blue', color: '#000', weight: 1, opacity: 1, fillOpacity: 0.8 }, true, 'nome');

    // 3️⃣ Alunos (pontos) - vermelho
    addGeoJSON('aluno.json', { radius: 6, fillColor: 'red', color: '#000', weight: 1, opacity: 1, fillOpacity: 0.7 }, true, 'nome');
  </script>
</body>
</html>
